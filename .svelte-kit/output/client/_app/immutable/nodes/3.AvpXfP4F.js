import{c as pt,a as c,l as mt}from"../chunks/CM4y3QyB.js";import{d as ut,p as _t,t as q,s as D,q as ft,u as xt,j as ht,i as S,a as h,f as v,h as bt,b as n,l as e,g as s,F as l,k as g,r as a,c as E,m as u,v as yt,w as Q,o as U,n as V}from"../chunks/oQ9KHoCl.js";import{i as j}from"../chunks/B6Yvxf5m.js";import{e as wt,i as kt}from"../chunks/D6uOdIwr.js";import{s as St}from"../chunks/CjJHMaRL.js";import{g as jt,l as Ct}from"../chunks/B_OUDf4Y.js";import{g as $t}from"../chunks/BXtNqw99.js";r[l]="src/routes/join/+page.svelte";var At=c(g('<div class="bg-red-100 text-red-700 rounded-lg p-4 mb-6"> </div>'),r[l],[[55,3]]),Mt=c(g('<div class="bg-white rounded-lg shadow-lg p-8 text-center"><div class="animate-pulse"><div class="h-4 bg-gray-200 rounded w-3/4 mx-auto mb-4"></div> <div class="h-4 bg-gray-200 rounded w-1/2 mx-auto"></div></div></div>'),r[l],[[61,3,[[62,4,[[63,5],[64,5]]]]]]),Ft=c(g('<div class="bg-white rounded-lg shadow-lg p-8 text-center"><div class="text-6xl mb-4">üì≠</div> <h2 class="text-xl font-semibold text-gray-800 mb-2">No Active Sessions</h2> <p class="text-gray-600 mb-6">There are no sessions available to join right now.</p> <button class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition">Refresh</button></div>'),r[l],[[68,3,[[69,4],[70,4],[71,4],[72,4]]]]),It=(N,C,_)=>C(s(_).id),Lt=c(g('<div class="mt-3 pt-3 border-t border-gray-100"><div class="flex items-center gap-2"><span class="text-sm text-gray-500">In Progress:</span> <div class="flex-1 bg-gray-200 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full transition-all"></div></div> <span class="text-sm text-gray-600"> </span></div></div>'),r[l],[[108,7,[[109,8,[[110,9],[111,9,[[112,10]]],[117,9]]]]]]),Tt=c(g('<button class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer w-full text-left"><div class="flex justify-between items-start"><div class="flex-1"><h3 class="text-xl font-semibold text-gray-800 mb-2"> </h3> <div class="flex items-center gap-4 text-sm text-gray-600"><span class="font-mono bg-gray-100 px-2 py-1 rounded"> </span> <span> </span> <span> </span></div></div> <div class="px-4 py-2 bg-gray-600 text-white rounded-lg">Join ‚Üí</div></div> <!></button>'),r[l],[[82,5,[[84,6,[[85,7,[[86,8],[89,8,[[90,9],[93,9],[96,9]]]]],[101,7]]]]]]),qt=c(g('<div class="grid gap-4"></div> <div class="text-center mt-6"><button class="text-gray-600 hover:text-gray-800 text-sm">‚Üª Refreshing every 5 seconds</button></div>',1),r[l],[[80,3],[127,3,[[128,4]]]]),Dt=c(g('<div class="min-h-screen animated-gradient py-12 px-4"><div class="max-w-4xl mx-auto"><div class="bg-white rounded-lg shadow-xl p-8 mb-6"><h1 class="text-3xl font-bold text-gray-800 mb-2">Active Sessions</h1> <p class="text-gray-600">Select a session to join</p></div> <!> <!> <div class="mt-8 text-center"><a href="/" class="text-gray-600 hover:text-gray-800">‚Üê Back to Home</a></div></div></div>'),r[l],[[47,0,[[48,1,[[49,2,[[50,3],[51,3]]],[137,2,[[138,3]]]]]]]]);function r(N,C){pt(new.target),_t(C,!0,r);let _=q(D(ft([])),"activeSessions"),R=q(D(!0),"isLoading"),b=q(D(""),"error");xt(()=>{y();const t=setInterval(y,5e3);return()=>clearInterval(t)});async function y(){try{const t=(await ht(jt()))();S(_,t,!0),S(b,"")}catch(t){console.error(...Ct("error","Failed to load sessions:",t)),S(b,"Failed to load sessions")}finally{S(R,!1)}}function W(t){$t(`/session/${t}/join`)}function X(t){const i=new Date(t),d=Math.floor((new Date().getTime()-i.getTime())/1e3);return d<60?"just now":d<3600?`${Math.floor(d/60)} min ago`:d<86400?`${Math.floor(d/3600)} hours ago`:`${Math.floor(d/86400)} days ago`}var $=Dt(),B=e($),H=n(e(B),2);{var Y=t=>{var i=At(),w=e(i,!0);a(i),E(()=>u(w,s(b))),v(t,i)};h(()=>j(H,t=>{s(b)&&t(Y)}),"if",r,54,2)}var Z=n(H,2);{var tt=t=>{var i=Mt();v(t,i)},at=t=>{var i=yt(),w=Q(i);{var d=p=>{var m=Ft(),f=n(e(m),6);f.__click=y,a(m),v(p,m)},et=p=>{var m=qt(),f=Q(m);h(()=>wt(f,21,()=>s(_),kt,(rt,o)=>{var k=Tt();k.__click=[It,W,o];var A=e(k),P=e(A),M=e(P),ot=e(M,!0);a(M);var z=n(M,2),F=e(z),it=e(F);a(F);var I=n(F,2),nt=e(I);a(I);var G=n(I,2),dt=e(G);a(G),a(z),a(P),V(2),a(A);var vt=n(A,2);{var lt=x=>{var L=Lt(),K=e(L),T=n(e(K),2),ct=e(T);a(T);var O=n(T,2),gt=e(O);a(O),a(K),a(L),E(()=>{St(ct,`width: ${s(o).completedCount/s(o).activeCount*100}%`),u(gt,`${s(o).completedCount??""}/${s(o).activeCount??""} completed`)}),v(x,L)};h(()=>j(vt,x=>{s(o).activeCount>0&&x(lt)}),"if",r,107,6)}a(k),E(x=>{u(ot,s(o).name),u(it,`Code: ${s(o).code??""}`),u(nt,`${s(o).activeCount??""} participant${U(s(o).activeCount,1,!1)?"s":""}`),u(dt,`Started ${x??""}`)},[()=>X(s(o).createdAt)]),v(rt,k)}),"each",r,81,4),a(f);var J=n(f,2),st=e(J);st.__click=y,a(J),v(p,m)};h(()=>j(w,p=>{U(s(_).length,0)?p(d):p(et,!1)},!0),"if",r,67,2)}v(t,i)};h(()=>j(Z,t=>{s(R)?t(tt):t(at,!1)}),"if",r,60,2)}return V(2),a(B),a($),v(N,$),bt({...mt()})}ut(["click"]);export{r as component};
