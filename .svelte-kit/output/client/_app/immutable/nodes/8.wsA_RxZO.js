import{c as le,a as I,l as ce}from"../chunks/CM4y3QyB.js";import{d as ie,p as de,t as d,s as B,x as m,y as pe,l as e,a as G,b as o,c as E,f as L,h as ve,i as p,j as H,g as t,r as s,m as u,F as S,k as N}from"../chunks/oQ9KHoCl.js";import{i as ue}from"../chunks/B6Yvxf5m.js";import{e as ge,i as me}from"../chunks/D6uOdIwr.js";import{l}from"../chunks/B_OUDf4Y.js";import{s as r,a as _}from"../chunks/BFZMYnlh.js";g[S]="src/routes/test-stores/+page.svelte";async function fe(R,b,v,c){p(b,!0),p(v,null),console.log("=== TEST: Refreshing session ===");try{(await H(r.refreshSession(c)))(),console.log("=== TEST: Refresh complete ==="),console.log(...l("log","Current session:",r.currentSession)),console.log(...l("log","Current attendees:",r.currentAttendees)),console.log(...l("log","Analytics active:",_.activeCount)),console.log(...l("log","Analytics completed:",_.completedCount))}catch(i){p(v,i.message,!0),console.error(...l("error","Refresh failed:",i))}finally{p(b,!1)}}var _e=I(N('<p class="text-red-600"> </p>'),g[S],[[80,3]]),be=I(N('<div class="mb-2 p-2 bg-gray-50 rounded"><p class="font-medium"> </p> <p class="text-sm"> </p> <p class="text-sm"> </p></div>'),g[S],[[123,4,[[124,5],[125,5],[126,5]]]]),Se=I(N('<div class="p-8"><h1 class="text-2xl font-bold mb-4">Store Test Page</h1> <div class="mb-4"><p class="font-semibold"></p> <p> </p> <!></div> <div class="grid grid-cols-2 gap-4 mb-4"><button class="px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50">Load Session</button> <button class="px-4 py-2 bg-green-500 text-white rounded disabled:opacity-50">Refresh Session</button></div> <div class="space-y-4"><div class="p-4 border rounded"><h2 class="font-semibold mb-2">Session Store State:</h2> <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto"> </pre></div> <div class="p-4 border rounded"><h2 class="font-semibold mb-2">Analytics Store State:</h2> <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto"> </pre></div> <div class="p-4 border rounded"><h2 class="font-semibold mb-2">Attendees Detail:</h2> <!></div></div></div>'),g[S],[[73,0,[[74,1],[76,1,[[77,2],[78,2]]],[84,1,[[85,2],[92,2]]],[101,1,[[102,2,[[103,3],[104,3]]],[111,2,[[112,3],[113,3]]],[120,2,[[121,3]]]]]]]]);function g(R,b){le(new.target),de(b,!0,g);let v="8ff9174e-3c53-4fb5-a7dd-8c45d4bbaa3c",c=d(B(!1),"loading"),i=d(B(null),"error"),K=d(m(()=>r.currentSession),"currentSession"),D=d(m(()=>r.currentAttendees),"currentAttendees"),Q=d(m(()=>r.completedAttendees),"completedAttendees"),U=d(m(()=>_.activeCount),"activeCount"),V=d(m(()=>_.completedCount),"completedCount"),W=d(m(()=>_.preferenceScores),"preferenceScores");async function J(){p(c,!0),p(i,null),console.log("=== TEST: Loading session ==="),console.log("Setting current session ID:",v);try{r.setCurrentSession(v),(await H(r.loadSession(v)))(),console.log("=== TEST: Load complete ==="),console.log(...l("log","Current session:",r.currentSession)),console.log(...l("log","Current attendees:",r.currentAttendees)),console.log(...l("log","Completed attendees:",r.completedAttendees))}catch(a){p(i,a.message,!0),console.error(...l("error","Load failed:",a))}finally{p(c,!1)}}pe(()=>{console.log("Test page mounted, loading session..."),J()});var h=Se(),x=o(e(h),2),O=e(x);O.textContent="Session ID: 8ff9174e-3c53-4fb5-a7dd-8c45d4bbaa3c";var y=o(O,2),X=e(y);s(y);var Y=o(y,2);{var Z=a=>{var n=_e(),f=e(n);s(n),E(()=>u(f,`Error: ${t(i)??""}`)),L(a,n)};G(()=>ue(Y,a=>{t(i)&&a(Z)}),"if",g,79,2)}s(x);var C=o(x,2),A=e(C);A.__click=J;var F=o(A,2);F.__click=[fe,c,i,v],s(C);var M=o(C,2),T=e(M),P=o(e(T),2),ee=e(P);s(P),s(T);var $=o(T,2),j=o(e($),2),te=e(j);s(j),s($);var q=o($,2),se=o(e(q),2);return G(()=>ge(se,17,()=>t(D),me,(a,n)=>{var f=be(),k=e(f),oe=e(k,!0);s(k);var w=o(k,2),re=e(w);s(w);var z=o(w,2),ae=e(z);s(z),s(f),E(ne=>{u(oe,t(n).name),u(re,`Completed: ${t(n).completed??""}`),u(ae,`Scores: ${ne??""}`)},[()=>JSON.stringify(t(n).preferenceScores)]),L(a,f)}),"each",g,122,3),s(q),s(M),s(h),E((a,n)=>{u(X,`Loading: ${t(c)??""}`),A.disabled=t(c),F.disabled=t(c),u(ee,`
Current Session: ${a??""}
Current Attendees: ${t(D).length??""}
Completed Attendees: ${t(Q).length??""}
			`),u(te,`
Active Count: ${t(U)??""}
Completed Count: ${t(V)??""}
Preference Scores: ${n??""}
			`)},[()=>JSON.stringify(t(K),null,2),()=>JSON.stringify(t(W),null,2)]),L(R,h),ve({...ce()})}ie(["click"]);export{g as component};
