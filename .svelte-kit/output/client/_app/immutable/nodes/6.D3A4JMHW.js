import{c as K,a as x,l as O}from"../chunks/CM4y3QyB.js";import{p as Q,t as v,x as R,s as b,u as T,g as a,i as t,a as F,f as p,h as U,l,b as u,F as g,k as y,r as d,c as L,m as I,w as q,e as V,v as W,j as X}from"../chunks/oQ9KHoCl.js";import{i as J}from"../chunks/B6Yvxf5m.js";import{r as Z,b as $}from"../chunks/DX7TCDp3.js";import{r as ee,l as A,j as ae}from"../chunks/B_OUDf4Y.js";import{p as se}from"../chunks/CVfayQeD.js";import{g as re}from"../chunks/BXtNqw99.js";r[g]="src/routes/session/[sessionId]/join/+page.svelte";var te=x(y('<div class="mb-4 p-4 bg-red-100 text-red-700 rounded"> </div>'),r[g],[[55,3]]),oe=x(y('<h1 class="text-3xl font-bold text-gray-800 mb-2">Join Session</h1> <p class="text-gray-600 mb-6"> </p> <form><div class="mb-6"><label for="name" class="block text-sm font-medium text-gray-700 mb-2">Your Name</label> <input type="text" id="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent" placeholder="Enter your name" required/></div> <button type="submit" class="w-full py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed"> </button></form>',1),r[g],[[61,3],[62,3],[64,3,[[65,4,[[66,5],[69,5]]],[80,4]]]]),ie=x(y('<div class="text-center"><p class="text-gray-600">Loading session...</p></div>'),r[g],[[89,3,[[90,4]]]]),ne=x(y('<div class="min-h-screen animated-gradient flex items-center justify-center px-4"><div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full"><!> <!></div></div>'),r[g],[[52,0,[[53,1]]]]);function r(C,M){K(new.target),Q(M,!0,r);let D=v(R(()=>se.params.sessionId),"sessionId"),c=v(b(""),"participantName"),m=v(b(!1),"isJoining"),_=v(b(null),"sessionData"),o=v(b(""),"error");T(()=>{a(D)&&ee(a(D)).then(e=>{t(_,e,!0),e||t(o,"Session not found")}).catch(e=>{console.error(...A("error","Failed to load session:",e)),t(o,"Session not found")})});async function P(e){if(e.preventDefault(),!(!a(c).trim()||a(m))){t(m,!0),t(o,"");try{const s=(await X(ae({sessionCode:a(_).code,name:a(c).trim()})))();s.redirect&&re(s.redirect)}catch(s){console.error(...A("error","Failed to join:",s)),t(o,"Failed to join session. Please try again.")}finally{t(m,!1)}}}var h=ne(),N=l(h),E=l(N);{var Y=e=>{var s=te(),i=l(s,!0);d(s),L(()=>I(i,a(o))),p(e,s)};F(()=>J(E,e=>{a(o)&&e(Y)}),"if",r,54,2)}var z=u(E,2);{var B=e=>{var s=oe(),i=u(q(s),2),w=l(i);d(i);var n=u(i,2),f=l(n),j=u(l(f),2);Z(j),d(f);var S=u(f,2),H=l(S,!0);d(S),d(n),L(k=>{I(w,`Session: ${a(_).name??""}`),j.disabled=a(m),S.disabled=k,I(H,a(m)?"Joining...":"Join Session")},[()=>a(m)||!a(c).trim()]),V("submit",n,P),$(j,()=>a(c),k=>t(c,k)),p(e,s)},G=e=>{var s=W(),i=q(s);{var w=n=>{var f=ie();p(n,f)};F(()=>J(i,n=>{a(o)||n(w)},!0),"if",r,88,2)}p(e,s)};F(()=>J(z,e=>{a(_)?e(B):e(G,!1)}),"if",r,60,2)}return d(N),d(h),p(C,h),U({...O()})}export{r as component};
